package partials

import (
	"fmt"
	"github.com/timenglesf/personal-site/internal/shared"
	"net/url"
)

templ navLink(hrefStr templ.SafeURL, text string) {
	<li><a href={ hrefStr } class="text-xl text-base-content hover:text-info duration-300">{ text }</a></li>
}

templ logoutLink(d *shared.TemplateData) {
	<button hx-post="/admin/logout" hx-trigger="click" hx-target="#response" class="text-xl text-base-content hover:text-primary duration-300">Logout</button>
}

templ PageHeader(d *shared.TemplateData) {
	<header class="bg-base-100 p-4">
		<div class="flex navbar container justify-between mx-auto">
			<a href="https://timengle.dev" class="block cursor-pointer hover:text-info duration-300">
				<div class="navbar-start flex items-center">
					<img class="h-24 mr-4 rounded-lg" src="/static/dist/img/icon.webp" alt="Logo"/>
					<div class="hidden sm:block text-2xl md:text-3xl font-bold ">timengle.dev</div>
				</div>
			</a>
			<nav class="navbar navbar-end">
				<ul class="flex space-x-4">
					@navLink("/", "Home")
					//@navLink("/blog", "Blog")
					@navLink(templ.SafeURL(fmt.Sprintf("/posts/view/%s", url.QueryEscape(d.MostRecentPublicPost.Title))), "Blog")
					@navLink("/about", "About")
					@navLink("#", "Contact")
					if  d.IsAuthenticated {
						@navLink("/admin", "Dashboard")
					}
				</ul>
			</nav>
		</div>
	</header>
}
